import{y as b,q as e,u as v,e as k,f as S,bJ as _,k as Q,bw as re,m as oe,L as M,bK as q,a1 as D,z as w,V as f,t as m,dy as E,W as I,R as T,aR as Z,bM as ce,ae as F,g as $,O as ee,S as V,fg as U,aY as de,aZ as X,ec as xe,ac as me,cb as pe,ev as ue,fh as ge,h as se,Q as he,Y as je,j as be,fi as fe,fj as ye,p as ve,w as Ne,at as Le,J as ke,b9 as Ae,A as H,e6 as we}from"./main-1e616d6f.js";import{r as C}from"./tiptap-313d156f.js";import{P as Ee}from"./sectionWrappers-aaf62731.js";import{u as Te}from"./useTokenSupply-9a8f8b12.js";import{F as Se}from"./index-ed07b3e9.js";import"./osx-ethers-780b73f3.js";const L=({title:t,children:s})=>e.jsxs(Re,{children:[e.jsx(Ce,{children:t}),e.jsx("div",{children:s})]}),Re=b.div.attrs({className:"py-5 px-4 space-y-2 xl:space-y-4 bg-neutral-0 rounded-xl border border-neutral-100"})``,Ce=b.p.attrs({className:"font-semibold text-neutral-800 ft-text-xl"})``,l=b.dt.attrs({className:`font-semibold xl:font-normal text-neutral-800 xl:text-neutral-600
    w-1/4 col-span-1 whitespace-nowrap`})``,r=b.dd.attrs({className:"xl:flex shrink grow-0 font-normal xl:font-semibold ft-text-base"})`
  flex-basis: 75%;
`,O=b.dd.attrs({className:"xl:flex col-span-1"})`
  flex-grow: 1;
`,a=b.div.attrs({className:`space-y-1 py-3 md:py-4 xl:space-y-0 xl:flex
  xl:space-x-4 text-neutral-600 border-b border-neutral-100 ft-text-base md:grid grid-cols-2 gap-8`})``,K=({daoDetails:t})=>{const{t:s}=v(),{network:o}=k(),c=S(),n=t?.plugins?.[0]?.instanceAddress,d=t?.plugins?.[0]?.id,h=d===F,{data:y,isLoading:j}=_({pluginAddress:n,pluginType:d}),{data:x,isLoading:g}=Q(n,d,{countOnly:!0}),{data:i,isLoading:p}=re(n),{data:u,isLoading:R}=Te(i?.address??""),{isTokenMintable:te}=oe({daoToken:i,daoDetails:t});if(j||g||p||R)return e.jsx(M,{});if(!(!!t&&!!y&&!!x&&!!i&&!!u))return null;const N=y,{days:ne,hours:ie,minutes:le}=q(N.minDuration),W={earlyExecution:N.votingMode===D.EARLY_EXECUTION?s("labels.yes"):s("labels.no"),voteReplacement:N.votingMode===D.VOTE_REPLACEMENT?s("labels.yes"):s("labels.no")},ae=w[o].explorer+"token/"+i?.address;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:s("navLinks.members"),children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.review.eligibleVoters")}),e.jsx(r,{children:s("createDAO.step3.tokenMembership")})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("votingTerminal.token")}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-1 flex-wrap items-start justify-between gap-y-2",children:[e.jsx(f,{label:`${i.name} ${i.symbol}`,iconRight:m.LINK_EXTERNAL,href:ae,description:E(i.address),className:"shrink-0"}),te&&e.jsx(I,{label:s("labels.mintableByDao")})]})})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("labels.review.distribution")}),e.jsx(r,{children:e.jsx(f,{label:s("settings.community.distributionValue",{value:x.memberCount}),description:s("settings.community.distributionHelptext"),iconRight:m.LINK_EXTERNAL,onClick:()=>c(T(Z,{network:o,dao:t.address}))})})]}),e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:s("labels.supply")}),e.jsx(r,{children:`${u.formatted} ${i.symbol}`})]})]}),e.jsxs(L,{title:s("labels.review.governance"),children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.minimumApprovalThreshold")}),e.jsx(r,{children:`>${Math.round(N.supportThreshold*100)}%`})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("labels.minimumParticipation")}),e.jsx(r,{children:`≥${Math.round(N.minParticipation*100)}% (≥ ${N.minParticipation*(u.formatted??0)} ${i.symbol})`})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("labels.minimumDuration")}),e.jsx(r,{children:s("governance.settings.preview",{days:ne,hours:ie,minutes:le})})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.review.earlyExecution")}),e.jsx(r,{children:W.earlyExecution})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("labels.review.voteReplacement")}),e.jsx(r,{children:W.voteReplacement})]})]}),e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:s("labels.review.proposalThreshold")}),e.jsx(r,{children:s("labels.review.tokenHoldersWithTkns",{tokenAmount:ce(N.minProposerVotingPower??0,i.decimals),tokenSymbol:i.symbol})})]})]})]})},Me=({daoDetails:t})=>{const{t:s}=v(),{network:o}=k(),c=S(),n=t?.plugins?.[0]?.instanceAddress,d=t?.plugins?.[0]?.id,{data:h,isLoading:y}=_({pluginAddress:n,pluginType:d}),{data:j,isLoading:x}=Q(n,d,{countOnly:!0});if(y||x)return e.jsx(M,{});if(!(!!h&&!!j&&!!t))return null;const p=h;return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:s("navLinks.members"),children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.review.eligibleVoters")}),e.jsx(r,{children:s("createDAO.step3.multisigMembers")})]}),e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:s("labels.members")}),e.jsx(r,{children:e.jsx(f,{label:s("createDAO.review.distributionLink",{count:j.memberCount}),description:s("settings.community.memberHelptext"),iconRight:m.LINK_EXTERNAL,onClick:()=>c(T(Z,{network:o,dao:t.address}))})})]})]}),e.jsxs(L,{title:s("labels.review.governance"),children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.minimumApproval")}),e.jsx(r,{children:s("labels.review.multisigMinimumApprovals",{count:p.minApprovals,total:j.memberCount})})]}),e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:s("labels.proposalCreation")}),e.jsx(r,{children:p.onlyListed?s("createDAO.step3.multisigMembers"):s("createDAO.step3.eligibility.anyWallet.title")})]})]})]})},Oe=()=>{const{t}=v(),{isDesktop:s}=$(),o=S(),{network:c}=k(),{dao:n}=ee();return s?e.jsx(G,{className:"xl:gap-x-6 xl:p-6",children:e.jsxs("div",{className:"flex items-start gap-x-12",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs(z,{children:[e.jsx(V,{icon:m.RELOAD}),e.jsx(B,{children:t("update.alert.title")})]}),e.jsx(J,{className:"space-y-0",children:e.jsx(Y,{children:t("update.alert.desc")})})]}),e.jsx(U,{label:t("update.alert.ctaLabel"),type:"neutral",iconRight:m.LINK_EXTERNAL,onClick:()=>o(T(X,{type:de.OSUpdates,network:c,dao:n}))})]})}):e.jsxs(G,{children:[e.jsxs(z,{children:[e.jsx(V,{icon:m.RELOAD}),e.jsx(B,{children:t("update.alert.title")})]}),e.jsxs(J,{children:[e.jsx(Y,{children:t("update.alert.desc")}),e.jsx(U,{label:t("update.alert.ctaLabel"),type:"neutral",iconRight:m.LINK_EXTERNAL,onClick:()=>o(T(X,{type:"os-update",network:c,dao:n}))})]})]})},G=b.div.attrs({className:"gap-x-4 p-4 space-y-2 bg-primary-400 rounded-xl"})``,z=b.div.attrs({className:"flex items-center space-x-3 font-semibold text-neutral-0 ft-text-lg"})``,B=b.p.attrs({})``,Y=b.p.attrs({className:"ft-text-base"})``,J=b.div.attrs({className:"pl-7 space-y-3 text-primary-50"})``,Ie=({pluginAddress:t,pluginVersion:s,pluginType:o,daoAddress:c})=>{const{t:n}=v(),{network:d}=k(),{data:h,isLoading:y}=xe(c),j=w[d].explorer+"address/";let x="";const g=me(d);g!=="unsupported"&&pe.includes(g)&&(x=ue[h?.join(".")]?.[g]?.daoFactoryAddress);let i="";switch(o){case"multisig.plugin.dao.eth":i="Multisig";break;case"token-voting.plugin.dao.eth":i="Token Voting";break;case F:i="Vocdoni Gasless Voting";break;default:i="Unknown plugin"}return e.jsx("div",{className:"col-span-full mt-2 xl:col-span-4 xl:col-start-8 xl:row-start-3 xl:-ml-2 xl:-mt-2",children:e.jsxs(L,{title:n("setting.versionInfo.title"),children:[e.jsxs(a,{children:[e.jsx(l,{children:n("setting.versionInfo.labelApp")}),e.jsx(O,{className:"truncate",children:e.jsx(f,{label:`Aragon App v${ge}`,type:"primary",iconRight:m.LINK_EXTERNAL,href:"https://app.aragon.org"})})]}),e.jsxs(a,{children:[e.jsx(l,{children:n("setting.versionInfo.labelOs")}),e.jsx(O,{className:"truncate",children:e.jsx(f,{label:y?"Loading...":`Aragon OSx v${h?.join(".")}`,description:x?E(x):void 0,type:"primary",href:j+x,iconRight:m.LINK_EXTERNAL})})]}),e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:n("setting.versionInfo.labelGovernance")}),e.jsx(O,{className:"truncate",children:e.jsx(f,{label:`${i} v${s}`,description:E(t),type:"primary",href:j+t,iconRight:m.LINK_EXTERNAL})})]})]})})},Ve=({daoDetails:t})=>{const{t:s}=v(),o=t?.plugins?.[0]?.instanceAddress,c=t?.plugins?.[0]?.id,{open:n}=se(),{data:d,isLoading:h}=_({pluginAddress:o,pluginType:c});if(h)return e.jsx(M,{});if(!(!!t&&!!d))return null;const x=d,{days:g,hours:i,minutes:p}=q(x.minTallyDuration);return e.jsxs(e.Fragment,{children:[e.jsxs(L,{title:s("label.executionMultisig"),children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.members")}),e.jsx(r,{children:e.jsx(f,{label:s("createDAO.review.distributionLink",{count:x.executionMultisigMembers?.length}),onClick:()=>n("committeeMembers")})})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("labels.minimumApproval")}),e.jsx(r,{children:s("labels.review.multisigMinimumApprovals",{count:x.minTallyApprovals,total:x.executionMultisigMembers?.length})})]}),e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:s("labels.minimumDuration")}),e.jsx(r,{children:s("governance.settings.preview",{days:g,hours:i,minutes:p})})]})]}),e.jsx(Pe,{wallets:x.executionMultisigMembers?.map(u=>({address:u,ensName:""}))})]})},Pe=({wallets:t})=>{const{isOpen:s,close:o}=se("committeeMembers"),{network:c}=k();return e.jsx(he,{isOpen:s,onClose:o,"data-testid":"communityModal",children:e.jsx(Se,{wallets:t,onVoterClick:n=>{window.open(`${w[c].explorer}address/${n}`,"_blank")}})})},Ye=()=>{const{t}=v(),s=S(),{address:o}=je(),{isDesktop:c}=$(),{data:n,isLoading:d}=be(),h=fe(),y=n?.plugins?.[0]?.instanceAddress,j=n?.plugins?.[0]?.id,{data:x}=ye({address:o,pluginAddress:y,pluginType:j});if(d)return e.jsx(M,{});if(!n)return null;const g=ve.getValue("VITE_FEATURE_FLAG_OSX_UPDATES")==="true",i=h&&x&&g;return e.jsxs($e,{children:[i&&e.jsx("div",{className:`mt-1 xl:mt-3 ${A.fullWidth}`,children:e.jsx(Oe,{})}),e.jsx("div",{className:`mt-2 xl:row-start-3 xl:-mt-2 ${g?A.leftCol:A.center}`,children:e.jsxs("div",{className:"flex flex-col gap-y-6",children:[e.jsx(_e,{daoDetails:n}),e.jsx(Fe,{daoDetails:n})]})}),g&&e.jsx(Ie,{pluginAddress:n.plugins[0].instanceAddress,pluginType:n.plugins[0].id,pluginVersion:`${n.plugins[0].release}.${n.plugins[0].build}`,daoAddress:n.address}),e.jsx("div",{className:`xl:row-start-4 ${g?A.fullWidth:A.center}`,children:e.jsxs("div",{className:"mt-2 space-y-4 xl:-mt-2",children:[e.jsx(Ne,{className:"w-full md:w-max",size:"lg",variant:"primary",iconLeft:c?void 0:m.APP_PROPOSALS,onClick:()=>s("edit"),children:t("settings.edit")}),e.jsx(Le,{message:t("settings.proposeSettingsInfo"),variant:"info"})]})})]})},A={fullWidth:"col-span-full xl:col-start-2 xl:col-end-12 xl:col-span-6",leftCol:"col-span-full xl:col-start-2 xl:col-end-8",center:"col-span-full xl:col-start-4 xl:col-end-10 xl:col-span-6"},P=3,_e=({daoDetails:t})=>{const{t:s}=v(),{network:o,isL2Network:c}=k(),n=C.useRef(null),[d,h]=C.useState(!0),[y,j]=C.useState(!1),x=w[o].explorer+"address/"+t.address,g=w[o].name,i=t.metadata.links.length!==0;return C.useEffect(()=>{function p(){const u=n.current;if(!u)return;const R=u.offsetHeight/parseFloat(getComputedStyle(u).lineHeight);j(R>P),h(R<=P)}return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[]),e.jsxs(L,{title:s("labels.review.daoMetadata"),children:[e.jsxs(a,{children:[e.jsx(l,{children:s("labels.daoName")}),e.jsx(r,{children:e.jsxs("div",{className:"flex items-center space-x-3 xl:space-x-4",children:[e.jsx("p",{className:"ft-text-base xl:font-semibold",children:t.metadata.name}),e.jsx(ke,{size:"small",daoName:t.metadata.name,src:t.metadata.avatar})]})})]}),e.jsxs(a,{children:[e.jsx(l,{children:s("labels.review.blockchain")}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-1 flex-wrap justify-between gap-y-2",children:[e.jsx("p",{className:"shrink-0 ft-text-base xl:font-semibold",children:g}),e.jsx(I,{label:s("labels.notChangeable"),variant:"neutral"})]})})]}),e.jsxs(a,{children:[e.jsx(l,{children:s(c?"settings.dao.contractAddress":"labels.ens")}),e.jsx(r,{children:e.jsxs("div",{className:"flex flex-1 flex-wrap items-start justify-between gap-y-2",children:[e.jsx(f,{...c?{label:E(t.address)}:{label:Ae(t.ensDomain),description:E(t.address)},type:"primary",className:"shrink-0",href:x,iconRight:m.LINK_EXTERNAL}),e.jsx(I,{label:s("labels.notChangeable"),variant:"neutral"})]})})]}),e.jsxs(a,{className:i?"":"border-none",children:[e.jsx(l,{children:s("labels.summary")}),e.jsxs(r,{className:"flex flex-col gap-y-2",children:[e.jsx(We,{ref:n,fullDescription:d,children:t.metadata.description}),y&&e.jsx(f,{...d?{label:s("settings.dao.summaryToggleClose"),iconRight:m.CHEVRON_DOWN}:{label:s("settings.dao.summaryToggleMore"),iconRight:m.CHEVRON_DOWN},className:"ft-text-base",onClick:()=>h(p=>!p)})]})]}),i&&e.jsxs(a,{className:"border-none",children:[e.jsx(l,{children:s("labels.links")}),e.jsx(r,{children:e.jsxs("div",{className:"relative flex flex-col space-y-3",children:[t.metadata.links.slice(0,3).map(({name:p,url:u})=>e.jsx(f,{label:p,description:u,type:"primary",href:u,iconRight:m.LINK_EXTERNAL},u)),t.metadata.links.length>3&&e.jsx(H.Container,{customTrigger:e.jsx(f,{label:s("settings.dao.links.allLinks"),type:"primary",iconRight:m.CHEVRON_DOWN}),children:t.metadata.links.map(({name:p,url:u})=>e.jsx(H.Item,{children:e.jsx(f,{label:p,description:u,type:"primary",href:u,iconRight:m.LINK_EXTERNAL})},p))})]})})]})]})},Fe=({daoDetails:t})=>{switch(t?.plugins?.[0]?.id){case"token-voting.plugin.dao.eth":return e.jsx(K,{daoDetails:t});case"multisig.plugin.dao.eth":return e.jsx(Me,{daoDetails:t});case F:return e.jsxs(e.Fragment,{children:[e.jsx(K,{daoDetails:t}),e.jsx(Ve,{daoDetails:t})]});default:return e.jsx("div",{children:"Unsupported Plugin"})}},$e=({children:t})=>{const{t:s}=v(),{isMobile:o}=$(),{dao:c}=ee(),{network:n}=k(),d=S();return e.jsx(Ee,{title:s("labels.daoSettings"),primaryBtnProps:{label:s("settings.edit"),iconLeft:o?e.jsx(V,{icon:m.APP_PROPOSALS}):void 0,onClick:()=>d(T(we,{network:n,dao:c}))},customBody:e.jsx(e.Fragment,{children:t})})},Je=b.div.attrs({className:"col-span-full xl:col-start-4 xl:col-end-10 text-neutral-600 xl:mt-4"})``,We=b.p.attrs({className:"font-normal text-neutral-600 ft-text-base"})`
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: ${t=>t.fullDescription?"unset":P};
`;export{Je as Layout,Ye as Settings};
