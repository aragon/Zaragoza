import{b3 as S,q as e,y as w,bd as A,e as D,f as I,O as C,p as k,be as M,aw as P,W as G,w as H,t as _,R as O,T as R,am as V,bf as F,u as z,l as U,bg as y,aB as W,z as B,a3 as Y}from"./main-1e616d6f.js";import{r as N}from"./tiptap-313d156f.js";const T=t=>{const{votingPower:a,tokenSymbol:r,tokenSupply:d}=t,l=d&&a!=null?(a/d*100).toFixed(2):void 0,o=S(a?.toString()??"0");return(a??0)<=0?null:e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsxs("div",{className:"flex flex-row gap-0.5 font-semibold ft-text-sm",children:[e.jsx("span",{children:o}),e.jsx("span",{children:r})]}),e.jsxs("span",{className:"ft-text-xs",children:["(",l,"%)"]})]})},E=t=>{const{isCompactMode:a,addressOrEns:r,avatar:d,delegations:l,tokenSupply:o,tagLabel:c,votingPower:u,tokenSymbol:i,walletId:n}=t,{isDesktop:h}=A(),{network:p}=D(),g=I(),{dao:j}=C(),x=a??!h,m=k.getValue("VITE_FEATURE_FLAG_DELEGATION")==="true",s=()=>{g(O(R,{network:p,dao:j,user:r}))};return e.jsxs(q,{onClick:s,children:[e.jsx(f,{children:e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(M,{size:"small",mode:"circle",src:d??r}),e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsxs("div",{className:"flex flex-row items-start gap-2",children:[e.jsx("div",{className:"font-semibold text-neutral-800 ft-text-base group-hover:text-primary-600",children:P(r)}),n&&c&&e.jsx(G,{label:c,variant:n==="you"?"neutral":"info",className:"-mt-1"})]}),x&&e.jsxs("div",{className:"flex grow flex-row justify-between text-neutral-600",children:[e.jsx(T,{votingPower:u,tokenSupply:o,tokenSymbol:i}),(l??0)>0&&m&&e.jsx("div",{className:"ft-text-sm",children:e.jsxs("span",{children:[l," Delegations"]})})]})]})]})}),!x&&u!=null&&i&&e.jsx(f,{className:"text-neutral-600",children:e.jsx(T,{votingPower:u,tokenSupply:o,tokenSymbol:i})}),!x&&l!=null&&m&&e.jsx(f,{className:"text-neutral-600 ft-text-sm",children:e.jsx("span",{children:l>0?l:""})}),e.jsx(f,{className:"flex justify-end gap-x-3",children:!x&&e.jsx(H,{variant:"tertiary",iconLeft:_.CHEVRON_RIGHT,size:"md",className:"group-hover:text-primary-600"})})]})},q=w.tr.attrs({className:"border-b border-b-neutral-100 bg-neutral-0 last:border-neutral-0 hover:cursor-pointer group"})``,f=w.td.attrs({className:"items-center py-4 px-6 h-full"})``,K=({token:t,members:a,isCompactMode:r})=>{const[d,l]=N.useState(0),{network:o}=D(),{api:c}=V(),{address:u}=F(),{isDesktop:i}=A(),{t:n}=z(),{isGovernanceEnabled:h}=U(),p=t!=null,g=r??!i,j=k.getValue("VITE_FEATURE_FLAG_DELEGATION")==="true";N.useEffect(()=>{async function s(){if(c&&t){const{totalSupply:v,decimals:L}=await W(t.address,c,B[o].nativeCurrency);l(Number(Y.formatUnits(v,L)))}}s()},[c,t,o]);const x=s=>{if(s.address.toLowerCase()===u?.toLowerCase())return{walletId:"you",tagLabel:n("tagWallet.labelYou")};if(y(s)&&s.delegators.some(v=>v.toLowerCase()===u?.toLowerCase()))return{walletId:"delegate",tagLabel:n("tagWallet.labelYourDelegate")}};if(a.length===0)return null;const m=i&&p&&j;return e.jsx("div",{className:`overflow-hidden rounded-xl ${g?"border border-neutral-100":""} `,children:e.jsxs("table",{className:"h-full w-full",children:[!g&&e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-b-neutral-100 bg-neutral-0 text-neutral-600",children:[e.jsx(b,{children:n("community.listHeader.member")}),i&&p&&e.jsx(b,{children:n("community.listHeader.votingPower")}),m&&h&&e.jsx(b,{children:n("community.listHeader.delegations")}),e.jsx(b,{})]})}),e.jsx("tbody",{children:a.map(s=>y(s)?e.jsx(E,{addressOrEns:s.address,delegations:s.delegators.length,votingPower:s.votingPower,tokenSymbol:t?.symbol,tokenSupply:d,isTokenDaoMember:!0,isCompactMode:r,...x(s)},s.address):e.jsx(E,{addressOrEns:s.address,isCompactMode:r},s.address))})]})})},b=w.td.attrs({className:"text-left px-6 py-4"})``;export{K as M};
