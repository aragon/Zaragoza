import{u as Z,e as ee,f as se,g as te,h as ne,i as oe,j as ae,k as le,l as re,m as ie,p as ce,q as s,L as D,r as de,x as G,t,S as n,v as me,A as E,w as ue,P as pe,y as h,z as ge}from"./main-1e616d6f.js";import{r}from"./tiptap-313d156f.js";import{M as be}from"./index-91660b57.js";import{P as O}from"./sectionWrappers-aaf62731.js";import"./osx-ethers-780b73f3.js";const xe=(e,p=500)=>{const[o,y]=r.useState(e),[i,g]=r.useState(e);return r.useEffect(()=>{const c=setTimeout(()=>{g(o)},p);return()=>{clearTimeout(c)}},[p,o]),[i,o,y]},u=20,je=()=>{const{t:e}=Z(),{network:p}=ee(),o=se(),{isMobile:y}=te(),{open:i}=ne(),{handleOpenModal:g}=oe(),[c,V]=r.useState(1),[a,T]=r.useState("votingPower"),[P,H,K]=xe(""),{data:b,isLoading:F}=ae(),W=b?.plugins[0].instanceAddress,U=b?.plugins[0].id,L=Math.floor((c-1)/1e3*u),{data:{members:v,filteredMembers:B,daoToken:d,memberCount:m},isLoading:k}=le(W,U,{searchTerm:P,sort:a,page:L}),{isGovernanceEnabled:M}=re(),{isDAOTokenWrapped:f,isTokenMintable:A}=ie({daoToken:d,daoDetails:b}),l=B.length,N=l>0&&l<v.length&&L===0,X=N?B:v,R=N?l:m,I=(c-1)*u-L*1e3,z=X.slice(I,I+u),S=b?.plugins[0].id==="multisig.plugin.dao.eth",_=m<=1e3,Q=ce.getValue("VITE_FEATURE_FLAG_DELEGATION")==="true",$=y?"":e(a==="delegations"?"community.sortByDelegations.selected":"community.sortByVotingPower.selected"),q=j=>{K(j.target.value.trim())},w=()=>{window.open(ge[p].explorer+"/token/tokenholderchart/"+d?.address,"_blank")},x=()=>{A?o("mint-tokens"):w()},C=()=>{S?o("manage-members"):f?g():A&&i("delegateVoting")},Y=r.useCallback(j=>{V(j),window.scrollTo({top:0,behavior:"smooth"})},[]);if(F||k)return s.jsx(D,{});if(!m&&f)return s.jsx(O,{includeHeader:!1,children:s.jsx(de,{className:"mt-6 flex items-center justify-center md:mt-10",children:s.jsx(G,{heading:e("community.emptyState.title"),description:e("community.emptyState.desc",{tokenSymbol:d?.underlyingToken?.symbol||d?.symbol}),humanIllustration:{body:"ELEVATING",expression:"SMILE_WINK",hairs:"MIDDLE",sunglasses:"BIG_ROUNDED",accessory:"BUDDHA"},primaryButton:{label:e("community.emptyState.ctaLabel"),onClick:g},secondaryButton:{label:e("navLinks.guide"),href:e("community.emptyState.descLinkURL"),target:"_blank",iconRight:t.LINK_EXTERNAL}})})});const J=M?`${m} ${e("labels.members")}`:e("labels.activeMembers",{count:m});return s.jsx(O,{title:J,...S?{description:e("explore.explorer.walletBased"),primaryBtnProps:{label:e("labels.manageMember"),onClick:C}}:M?f?{description:e("explore.explorer.tokenBased"),primaryBtnProps:{label:e("governance.actionSecondary"),iconLeft:s.jsx(n,{icon:t.APP_PROPOSALS}),onClick:()=>i("delegateVoting")},secondaryBtnProps:{label:e("community.ctaMain.wrappedLabel"),onClick:C},tertiaryBtnProps:{label:e("labels.seeAllHolders"),iconLeft:s.jsx(n,{icon:t.LINK_EXTERNAL}),onClick:x}}:A?{description:e("explore.explorer.tokenBased"),primaryBtnProps:{label:e("governance.actionSecondary"),iconLeft:s.jsx(n,{icon:t.APP_PROPOSALS}),onClick:C},secondaryBtnProps:{label:e("labels.mintTokens"),iconLeft:s.jsx(n,{icon:t.PLUS}),onClick:x},tertiaryBtnProps:{label:e("labels.seeAllHolders"),iconLeft:s.jsx(n,{icon:t.LINK_EXTERNAL}),onClick:w}}:{description:e("explore.explorer.tokenBased"),primaryBtnProps:{label:e("governance.actionSecondary"),iconLeft:s.jsx(n,{icon:t.APP_PROPOSALS}),onClick:()=>i("delegateVoting")},secondaryBtnProps:{label:e("labels.seeAllHolders"),iconLeft:s.jsx(n,{icon:t.LINK_EXTERNAL}),onClick:x}}:{description:e("explore.explorer.tokenBased"),secondaryBtnProps:{label:e("labels.seeAllHolders"),iconLeft:s.jsx(n,{icon:t.LINK_EXTERNAL}),onClick:x}},children:s.jsxs(he,{children:[s.jsxs(ye,{children:[s.jsxs("div",{className:"flex flex-row gap-4 xl:gap-8",children:[_&&s.jsx(me,{placeholder:e("labels.searchPlaceholder"),containerClassName:"grow",value:H,onChange:q}),!S&&_&&Q&&s.jsxs(E.Container,{customTrigger:s.jsx(ue,{variant:"tertiary",iconLeft:t.SORT_ASC,size:"lg",children:$}),align:"end",children:[s.jsx(E.Item,{icon:a==="votingPower"?t.CHECKMARK:void 0,iconPosition:"right",selected:a==="votingPower",onClick:()=>T("votingPower"),children:e("community.sortByVotingPower.default")}),s.jsx(E.Item,{icon:a==="delegations"?t.CHECKMARK:void 0,iconPosition:"right",selected:a==="delegations",onClick:()=>T("delegations"),children:e("community.sortByDelegations.default")})]})]}),k?s.jsx(D,{}):s.jsx(s.Fragment,{children:P!==""&&!l?s.jsx(G,{objectIllustration:{object:"MAGNIFYING_GLASS"},heading:e("labels.noResults"),description:e("labels.noResultsSubtitle")}):s.jsxs(s.Fragment,{children:[P!==""&&!k&&s.jsx(Pe,{children:l===1?e("labels.result"):e("labels.nResults",{count:l})}),s.jsx(be,{token:d,members:z})]})})]}),s.jsx(Le,{children:R>u&&s.jsx(pe,{totalPages:Math.ceil(R/u),activePage:c,onChange:Y})})]})})},he=h.div.attrs({className:"mt-2 xl:space-y-16"})``,ye=h.div.attrs({className:"space-y-10"})``,Pe=h.p.attrs({className:"font-semibold text-neutral-800 ft-text-lg"})``,Le=h.div.attrs({className:"flex mt-16"})``;export{je as Community};
