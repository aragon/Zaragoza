import{q as n,y as U,u as Z,G as z,ar as K,dH as ve,cw as Q,ez as ee,eA as te,dz as ae,dF as G,I as W,eJ as ze,du as Re,eB as F,eC as $,eD as P,bR as qe,bS as Ce,aG as re,at as E,bT as Ne,bU as be,h as we,Q as Pe,v as Ze,cI as Ge,S as Je,t as Xe,j as Be,k as Ke,bJ as Qe,eK as ne,as as L,aJ as Me,eL as je,eM as et,bK as tt,bP as pe,ah as at,dR as rt,cx as nt}from"./main-1e616d6f.js";import{r as f}from"./tiptap-313d156f.js";import{g as Ae}from"./osx-ethers-780b73f3.js";const $t=({children:e})=>n.jsx(n.Fragment,{children:e});var Te={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default})(Te,Te.exports);var st=Te.exports;const it=Ae(st);var he={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;function a(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default})(he,he.exports);var ot=he.exports;const Ue=Ae(ot);function lt(e,t){var a=mt(t);return a.formatToParts?ct(a,e):dt(a,e)}var ut={year:0,month:1,day:2,hour:3,minute:4,second:5};function ct(e,t){try{for(var a=e.formatToParts(t),r=[],s=0;s<a.length;s++){var i=ut[a[s].type];i>=0&&(r[i]=parseInt(a[s].value,10))}return r}catch(c){if(c instanceof RangeError)return[NaN];throw c}}function dt(e,t){var a=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(a);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var se={};function mt(e){if(!se[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),a=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";se[e]=a?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return se[e]}function We(e,t,a,r,s,i,c){var p=new Date(0);return p.setUTCFullYear(e,t,a),p.setUTCHours(r,s,i,c),p}var ye=36e5,ft=6e4,ie={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function Dt(e,t,a){var r,s;if(!e||(r=ie.timezoneZ.exec(e),r))return 0;var i;if(r=ie.timezoneHH.exec(e),r)return i=parseInt(r[1],10),Se(i)?-(i*ye):NaN;if(r=ie.timezoneHHMM.exec(e),r){i=parseInt(r[1],10);var c=parseInt(r[2],10);return Se(i,c)?(s=Math.abs(i)*ye+c*ft,i>0?-s:s):NaN}if(Tt(e)){t=new Date(t||Date.now());var p=a?t:gt(t),l=xe(p,e),o=a?l:pt(t,l,e);return-o}return NaN}function gt(e){return We(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function xe(e,t){var a=lt(e,t),r=We(a[0],a[1]-1,a[2],a[3]%24,a[4],a[5],0).getTime(),s=e.getTime(),i=s%1e3;return s-=i>=0?i:1e3+i,r-s}function pt(e,t,a){var r=e.getTime(),s=r-t,i=xe(new Date(s),a);if(t===i)return t;s-=i-t;var c=xe(new Date(s),a);return i===c?i:Math.max(i,c)}function Se(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var Ie={};function Tt(e){if(Ie[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Ie[e]=!0,!0}catch{return!1}}var ht=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,oe=36e5,Ve=6e4,xt=2,j={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ht};function le(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var a=t||{},r=a.additionalDigits==null?xt:it(a.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=vt(e),i=bt(s.date,r),c=i.year,p=i.restDateString,l=wt(p,c);if(isNaN(l))return new Date(NaN);if(l){var o=l.getTime(),T=0,d;if(s.time&&(T=Mt(s.time),isNaN(T)))return new Date(NaN);if(s.timeZone||a.timeZone){if(d=Dt(s.timeZone||a.timeZone,new Date(o+T)),isNaN(d))return new Date(NaN)}else d=Ue(new Date(o+T)),d=Ue(new Date(o+T+d));return new Date(o+T+d)}else return new Date(NaN)}function vt(e){var t={},a=j.dateTimePattern.exec(e),r;if(a?(t.date=a[1],r=a[3]):(a=j.datePattern.exec(e),a?(t.date=a[1],r=a[2]):(t.date=null,r=e)),r){var s=j.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function bt(e,t){var a=j.YYY[t],r=j.YYYYY[t],s;if(s=j.YYYY.exec(e)||r.exec(e),s){var i=s[1];return{year:parseInt(i,10),restDateString:e.slice(i.length)}}if(s=j.YY.exec(e)||a.exec(e),s){var c=s[1];return{year:parseInt(c,10)*100,restDateString:e.slice(c.length)}}return{year:null}}function wt(e,t){if(t===null)return null;var a,r,s,i;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(a=j.MM.exec(e),a)return r=new Date(0),s=parseInt(a[1],10)-1,Ye(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(a=j.DDD.exec(e),a){r=new Date(0);var c=parseInt(a[1],10);return jt(t,c)?(r.setUTCFullYear(t,0,c),r):new Date(NaN)}if(a=j.MMDD.exec(e),a){r=new Date(0),s=parseInt(a[1],10)-1;var p=parseInt(a[2],10);return Ye(t,s,p)?(r.setUTCFullYear(t,s,p),r):new Date(NaN)}if(a=j.Www.exec(e),a)return i=parseInt(a[1],10)-1,ke(t,i)?He(t,i):new Date(NaN);if(a=j.WwwD.exec(e),a){i=parseInt(a[1],10)-1;var l=parseInt(a[2],10)-1;return ke(t,i,l)?He(t,i,l):new Date(NaN)}return null}function Mt(e){var t,a,r;if(t=j.HH.exec(e),t)return a=parseFloat(t[1].replace(",",".")),ue(a)?a%24*oe:NaN;if(t=j.HHMM.exec(e),t)return a=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),ue(a,r)?a%24*oe+r*Ve:NaN;if(t=j.HHMMSS.exec(e),t){a=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return ue(a,r,s)?a%24*oe+r*Ve+s*1e3:NaN}return null}function He(e,t,a){t=t||0,a=a||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,i=t*7+a+1-s;return r.setUTCDate(r.getUTCDate()+i),r}var Ct=[31,28,31,30,31,30,31,31,30,31,30,31],Nt=[31,29,31,30,31,30,31,31,30,31,30,31];function _e(e){return e%400===0||e%4===0&&e%100!==0}function Ye(e,t,a){if(t<0||t>11)return!1;if(a!=null){if(a<1)return!1;var r=_e(e);if(r&&a>Nt[t]||!r&&a>Ct[t])return!1}return!0}function jt(e,t){if(t<1)return!1;var a=_e(e);return!(a&&t>366||!a&&t>365)}function ke(e,t,a){return!(t<0||t>52||a!=null&&(a<0||a>6))}function ue(e,t,a){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||a!=null&&(a<0||a>=60))}const Ut=U.input.attrs({type:"time",className:"w-full rounded-xl border-2 border-neutral-100 px-4 py-3"})`
  // hides the icon that allows to open the time selection dropdown
  ::-webkit-calendar-picker-indicator {
    display: none;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
    width: 101%; // necessary to make the "M" in AM/PM not be cropped
  }
  ::-webkit-datetime-edit-ampm-field {
    font-size: 12px;
    font-weight: bold;
  }
`,_=["UTC-11","UTC-10","UTC-9:30","UTC-9","UTC-8","UTC-7","UTC-6","UTC-5","UTC-4","UTC-3:30","UTC-3","UTC-2","UTC-1","UTC+0","UTC+1","UTC+2","UTC+3","UTC+3:30","UTC+4","UTC+4:30","UTC+5","UTC+5:30","UTC+5:45","UTC+6","UTC+6:30","UTC+7","UTC+8","UTC+8:45","UTC+9","UTC+9:30","UTC+10","UTC+10:30","UTC+11","UTC+12","UTC+12:45","UTC+13","UTC+14"],yt={days:0,hours:0,minutes:0};let q;const J=({mode:e,onUtcClicked:t,defaultDateOffset:a,minDurationAlert:r,minDurationMills:s,maxDurationMills:i=0})=>{const{days:c,hours:p,minutes:l}={...yt,...a},{t:o}=Z(),{control:T,getValues:d,clearErrors:x,setValue:h}=z(),[y]=K({control:T,name:[`${e}Utc`]}),H=f.useMemo(()=>_.find(v=>v===ve())||_[13],[]),I=f.useCallback(()=>{let v;if(q&&clearTimeout(q),d("startSwitch")==="date"){const A=d("startDate"),w=d("startTime"),D=d("startUtc"),N=Q(D);v=le(A+"T"+w+N)}else v=le(ee()+"T"+te({minutes:1})+Q());const u=v.valueOf(),m=new Date().getTime(),b=d("endDate"),M=d("endTime"),C=d("endUtc"),S=Q(C),k=le(b+"T"+M+S).valueOf(),O=u+s,V=u+i;return h("durationMills",k-u),u<m?(h("startTimeWarning",o("alert.startDateInPastAlert")),q=setTimeout(()=>{h("startDate",ee()),h("startTime",te({minutes:l})),h("startUtc",H)},ae),!0):(u>=m&&(x("startDate"),x("startTime"),h("startTimeWarning","")),k<O&&(h("endTimeWarning",r),q=setTimeout(()=>{h("endDate",G(O,"yyyy-MM-dd")),h("endTime",G(O,"HH:mm")),h("endUtc",H)},ae)),i!==0&&k>V&&(q=setTimeout(()=>{h("endDate",G(V,"yyyy-MM-dd")),h("endTime",G(V,"HH:mm")),h("endUtc",H)},ae)),k>=O&&(x("endDate"),x("endTime"),h("endTimeWarning","")),!0)},[x,H,d,i,r,s,l,h,o]);return n.jsx(n.Fragment,{children:n.jsxs(St,{children:[n.jsx(W,{name:`${e}Date`,control:T,defaultValue:ee({days:c}),rules:{required:o("errors.required.date"),validate:I},render:({field:{name:v,value:u,onChange:g,onBlur:m}})=>n.jsxs(ce,{children:[n.jsx(de,{children:o("labels.date")}),n.jsx(ze,{name:v,value:u,onChange:g,onBlur:m})]})}),n.jsx(W,{name:`${e}Time`,control:T,defaultValue:te({hours:p,minutes:l}),rules:{required:o("errors.required.time"),validate:I},render:({field:{name:v,value:u,onChange:g,onBlur:m}})=>n.jsxs(ce,{children:[n.jsx(de,{children:o("labels.time")}),n.jsx(Ut,{name:v,value:u,onChange:g,onBlur:m})]})}),n.jsxs(ce,{children:[n.jsx(de,{children:o("labels.timezone")}),n.jsx(Re,{value:y,onClick:t})]})]})})},ce=U.div.attrs({className:"space-y-1 w-1/2 md:w-full"})``,de=U.span.attrs({className:"text-sm leading-normal font-semibold text-neutral-800 capitalize"})``,St=U.div.attrs({className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 p-6 bg-neutral-0 rounded-xl"})``,Oe={days:0,hours:0,minutes:0},Le=({defaultValues:e,name:t="",minDuration:a,maxDurationDays:r})=>{const s={...Oe,...e},i={...Oe,...a},{t:c}=Z(),{control:p,getValues:l,setValue:o,trigger:T}=z();f.useEffect(()=>{o("durationDays",s.days),o("durationHours",s.hours),o("durationMinutes",s.minutes)},[s.days,s.hours,s.minutes,o]);const d=F(i.days)+$(i.hours)+P(i.minutes),x=Number(l("durationDays"))===r,h=f.useCallback(u=>F(u.days||0)+$(u.hours||0)+P(u.minutes||0)<d,[d]),y=f.useCallback(()=>{o("durationDays",i.days),o("durationHours",i.hours),o("durationMinutes",i.minutes)},[i.days,i.hours,i.minutes,o]),H=f.useCallback((u,g)=>{const m=Number(u.target.value),[b,M]=l(["durationHours","durationMinutes"]),C={days:m,hours:Number(b),minutes:Number(M)};r&&m>=r?(u.target.value=r.toString(),o("durationDays",r.toString()),o("durationHours","0"),o("durationMinutes","0")):m<=i.days&&h(C)&&(y(),u.target.value=i.days.toString()),T(["durationMinutes","durationHours","durationDays"]),g(u)},[h,l,r,i.days,y,o,T]),I=f.useCallback((u,g)=>{const m=Number(u.target.value),[b,M]=l(["durationDays","durationMinutes"]),C={days:Number(b),hours:m,minutes:Number(M)};if(m>=qe){const{days:S,hours:Y}=Ne(m,"hours");u.target.value=Y.toString(),S>0&&o("durationDays",(Number(l("durationDays"))+S).toString())}else m<=i.hours&&h(C)&&(y(),u.target.value=i.hours.toString());T(["durationMinutes","durationHours","durationDays"]),g(u)},[h,l,i.hours,y,o,T]),v=f.useCallback((u,g)=>{const m=Number(u.target.value),[b,M]=l(["durationDays","durationHours"]),C={days:Number(b),hours:Number(M),minutes:m};if(m>=Ce){const[S,Y]=l(["durationDays","durationHours"]),k=S*be+Y*Ce+m,{days:O,hours:V,mins:A}=Ne(k);o("durationDays",O.toString()),o("durationHours",V.toString()),u.target.value=A.toString()}else m<=i.minutes&&h(C)&&(y(),u.target.value=i.minutes.toString());T(["durationMinutes","durationHours","durationDays"]),g(u)},[h,l,i.minutes,y,o,T]);return n.jsxs(It,{children:[n.jsx(W,{name:`${t}durationMinutes`,control:p,defaultValue:`${s.minutes}`,rules:{required:c("errors.emptyDistributionMinutes"),validate:u=>u<=59&&u>=0?!0:c("errors.distributionMinutes")},render:({field:{onBlur:u,onChange:g,value:m,name:b},fieldState:{error:M}})=>n.jsxs(me,{children:[n.jsx(fe,{children:c("createDAO.step4.minutes")}),n.jsx(re,{name:b,value:Number(m).toString(),onBlur:u,onChange:C=>v(C,g),placeholder:"0",min:"0",disabled:x}),M?.message&&n.jsx(E,{message:M.message,variant:"critical"})]})}),n.jsx(W,{name:`${t}durationHours`,control:p,defaultValue:`${s.hours}`,rules:{required:c("errors.emptyDistributionHours")},render:({field:{onBlur:u,onChange:g,value:m,name:b},fieldState:{error:M}})=>n.jsxs(me,{children:[n.jsx(fe,{children:c("createDAO.step4.hours")}),n.jsx(re,{name:b,value:Number(m).toString(),onBlur:u,onChange:C=>I(C,g),placeholder:"0",min:"0",disabled:x}),M?.message&&n.jsx(E,{message:M.message,variant:"critical"})]})}),n.jsx(W,{name:`${t}durationDays`,control:p,defaultValue:`${s.days}`,rules:{required:c("errors.emptyDistributionDays"),validate:u=>u>=0?!0:c("errors.distributionDays")},render:({field:{onBlur:u,onChange:g,value:m,name:b},fieldState:{error:M}})=>n.jsxs(me,{children:[n.jsx(fe,{children:c("createDAO.step4.days")}),n.jsx(re,{name:b,value:Number(m).toString(),onBlur:u,onChange:C=>H(C,g),placeholder:"0",min:"0"}),M?.message&&n.jsx(E,{message:M.message,variant:"critical"})]})})]})},Fe=({alerts:e,...t})=>t.minDuration&&e?.minDuration?n.jsx(E,{message:e.minDuration,variant:"critical"}):t.maxDuration&&e?.maxDuration?n.jsx(E,{message:e.maxDuration,variant:t.limitOnMax?"critical":"warning"}):e?.acceptableDuration?n.jsx(E,{message:e.acceptableDuration,variant:"info"}):null,It=U.div.attrs({className:"flex flex-col md:flex-row space-y-3 md:space-y-0 md:space-x-3 p-6 bg-neutral-0 rounded-xl"})``,me=U.div.attrs({className:"md:w-full space-y-1"})``,fe=U.span.attrs({className:"text-sm leading-normal font-semibold text-neutral-800"})``,$e=({onTimezoneSelect:e})=>{const{isOpen:t,close:a}=we("utc"),[r,s]=f.useState(""),{t:i}=Z(),c=o=>{e(o),a()},p=o=>{s(o.target.value)},l=_.filter(o=>{const T=o.toLocaleLowerCase(),d=r.toLocaleLowerCase();return T.includes(d)});return n.jsx(Pe,{isOpen:t,onClose:a,title:i("newWithdraw.configureWithdraw.utcMenu.title"),children:n.jsxs(Vt,{children:[n.jsx(Ze,{placeholder:"Type to filter",value:r,onChange:p}),n.jsx(Ht,{children:n.jsx(Yt,{children:l.map(o=>n.jsx(Ge,{mode:"default",title:o,iconRight:n.jsx(Je,{icon:Xe.CHEVRON_RIGHT}),onClick:()=>c(o)},o))})})]})})},Vt=U.div.attrs({className:"space-y-2 p-6"})``,Ht=U.div.attrs({className:"space-y-2 overflow-y-auto"})``,Yt=U.div.attrs({className:"h-[200px] space-y-2 p-2"})``;function X({mode:e}){const{control:t,formState:a}=z(),[r]=K({control:t,name:[`${e}TimeWarning`]}),[s,i]=f.useState([]),[c,p]=f.useState([]);return f.useEffect(()=>{const l=[],o=[];Object.values(a.errors).filter(x=>x.ref?.name.includes(e)).forEach(x=>{if(x.message)switch(x.type){case"required":l.push(x.message);break;case"validate":o.push(x.message);break}}),i(l),p(o)},[a]),s.length>0?n.jsx("div",{children:s.map((l,o)=>n.jsx(E,{message:l,variant:"critical"},o))}):c.length>0?n.jsx("div",{children:n.jsx(E,{message:c[0],variant:"critical"})}):r&&r!==""?n.jsx(E,{message:r,variant:"critical"}):null}const kt=et*be*60*1e3,Ot=()=>{const{t:e}=Z(),{open:t}=we(),{data:a}=Be(),r=a?.plugins?.[0]?.instanceAddress,{data:{members:s}}=Ke(r,"multisig.plugin.dao.eth"),{data:i}=Qe({pluginAddress:r,pluginType:"multisig.plugin.dao.eth"}),[c,p]=f.useState("first"),{control:l,formState:o,getValues:T,resetField:d,setValue:x,trigger:h}=z(),[y,H,I]=K({control:l,name:["endTimeWarning","startSwitch","durationSwitch"]}),v=[{label:e("labels.now"),selectValue:"now"},{label:e("labels.dateTime"),selectValue:"date"}],u=[{label:e("labels.duration"),selectValue:"duration"},{label:e("labels.dateTime"),selectValue:"date"}],g={minDuration:e("alert.multisig.proposalMinDuration"),maxDuration:e("alert.multisig.proposalMaxDuration"),acceptableDuration:e("alert.multisig.accepTableProposalDuration")},m=$(je),b=f.useMemo(()=>_.find(w=>w===ve())||_[13],[]),M=w=>{x(c==="first"?"startUtc":"endUtc",w),h("startDate")},C=f.useCallback(()=>{d("durationDays"),d("durationHours"),d("durationMinutes"),d("endTimeWarning")},[d]),S=f.useCallback(()=>{d("startDate"),d("startTime"),d("startUtc"),d("startTimeWarning")},[d]),Y=f.useCallback(()=>{d("endDate"),d("endTime"),d("endUtc"),d("endTimeWarning")},[d]),k=f.useCallback((w,D)=>{D(w),w==="now"?S():x("startUtc",b)},[b,S,x]),O=f.useCallback((w,D)=>{D(w),w==="duration"?Y():(C(),x("endUtc",b))},[b,C,Y,x]),V=f.useCallback(()=>{if(T("durationSwitch")==="duration"){const[w,D,N]=T(["durationDays","durationHours","durationMinutes"]);return F(Number(w))+$(Number(D))+P(Number(N))}else return Number(T("durationMills"))||F(ne)},[T]),A=f.useCallback(w=>{p(w),t("utc")},[t]);return n.jsxs(n.Fragment,{children:[n.jsxs(ge,{children:[n.jsx(L,{label:e("newWithdraw.setupVoting.optionLabel.title"),helpText:e("newWithdraw.setupVoting.multisig.optionDescription")}),n.jsx(Me,{label:e("newWithdraw.setupVoting.multisig.votingOption.label"),type:"active",helptext:e("newWithdraw.setupVoting.multisig.votingOption.description",{amountMembers:i.minApprovals,totalAmountMembers:s.length}),multiSelect:!1}),n.jsx(E,{message:e("newWithdraw.setupVoting.multisig.votingOption.alert"),variant:"info"})]}),n.jsxs(ge,{children:[n.jsx(L,{label:e("newWithdraw.setupVoting.multisig.startLabel"),helpText:e("newWithdraw.setupVoting.multisig.startDescription")}),n.jsx(W,{name:"startSwitch",rules:{required:"Validate"},control:l,defaultValue:"now",render:({field:{onChange:w,value:D}})=>n.jsx(B,{items:v,value:D,onChange:N=>k(N,w)})}),H==="date"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{mode:"start",defaultDateOffset:{minutes:10},minDurationAlert:e("alert.multisig.dateTimeMinDuration"),minDurationMills:m,onUtcClicked:()=>A("first")}),n.jsx(X,{mode:"start"})]})]}),n.jsxs(ge,{children:[n.jsx(L,{label:e("newWithdraw.setupVoting.multisig.expiration"),helpText:e("newWithdraw.setupVoting.multisig.expirationDescription")}),n.jsx(W,{name:"durationSwitch",rules:{required:"Validate"},control:l,defaultValue:"duration",render:({field:{onChange:w,value:D}})=>n.jsx(B,{value:D,items:u,onChange:N=>O(N,w)})}),I==="duration"?n.jsx(Le,{defaultValues:{days:ne},minDuration:{hours:je}}):n.jsxs(n.Fragment,{children:[n.jsx(J,{mode:"end",onUtcClicked:()=>A("second"),minDurationAlert:e("alert.multisig.dateTimeMinDuration"),minDurationMills:m,defaultDateOffset:{days:ne,minutes:10}}),n.jsx(X,{mode:"end"})]}),!y&&!o?.errors?.endDate&&n.jsx(Fe,{maxDuration:V()>=kt,minDuration:V()===m,alerts:g})]}),n.jsx($e,{onTimezoneSelect:M})]})},B=({onChange:e,items:t,value:a})=>n.jsx(Et,{children:t.map(r=>n.jsx(At,{children:n.jsx(Me,{label:r.label,multiSelect:!1,onClick:()=>e(r.selectValue),type:a===r.selectValue?"active":"default"})},r.label))}),Et=U.div.attrs({className:"flex gap-y-3 gap-x-6"})``,At=U.div.attrs({className:"flex-1"})``,Ee=pe*be*60*1e3,Wt=({pluginSettings:e})=>{const{t}=Z(),{open:a}=we(),[r,s]=f.useState("first"),{control:i,formState:c,getValues:p,resetField:l,setValue:o,trigger:T}=z(),[d,x,h]=K({control:i,name:["endTimeWarning","startSwitch","durationSwitch"]}),y=[{label:t("labels.now"),selectValue:"now"},{label:t("labels.dateTime"),selectValue:"date"}],H=[{label:t("labels.duration"),selectValue:"duration"},{label:t("labels.dateTime"),selectValue:"date"}],I=f.useMemo(()=>_.find(D=>D===ve())||_[13],[]),{days:v,hours:u,minutes:g}=tt(e.minDuration),m={minDuration:t("alert.tokenVoting.proposalMinDuration",{days:v,hours:u,minutes:g}),maxDuration:t("alert.tokenVoting.proposalMaxDuration",{days:pe}),acceptableDuration:t("alert.tokenVoting.acceptableProposalDuration",{days:v,hours:u,minutes:g})},b=F(v||0)+$(u||0)+P(g||0),M=D=>{o(r==="first"?"startUtc":"endUtc",D),T("startDate")},C=f.useCallback(()=>{l("durationDays"),l("durationHours"),l("durationMinutes"),l("endTimeWarning")},[l]),S=f.useCallback(()=>{l("startDate"),l("startTime"),l("startUtc"),l("startTimeWarning")},[l]),Y=f.useCallback(()=>{l("endDate"),l("endTime"),l("endUtc"),l("endTimeWarning")},[l]),k=f.useCallback((D,N)=>{N(D),D==="now"?S():o("startUtc",I)},[I,S,o]),O=f.useCallback((D,N)=>{N(D),D==="duration"?Y():(C(),o("endUtc",I))},[I,C,Y,o]),V=f.useCallback(()=>{if(p("durationSwitch")==="duration"){const[D,N,R]=p(["durationDays","durationHours","durationMinutes"]);return F(Number(D))+$(Number(N))+P(Number(R))}else return Number(p("durationMills"))||0},[p]),A=f.useCallback(D=>{s(D),a("utc")},[a]),w=V()===b&&(c.dirtyFields?.durationDays||c.dirtyFields?.durationHours||c.dirtyFields?.durationMinutes);return n.jsxs(n.Fragment,{children:[n.jsxs(De,{children:[n.jsx(L,{label:t("newWithdraw.setupVoting.optionLabel.title")}),n.jsx(Me,{label:t("newWithdraw.setupVoting.yesNoLabel.title"),type:"active",helptext:t("newWithdraw.setupVoting.yesNoLabel.helpText"),multiSelect:!1}),n.jsx(at,{variant:"info",message:t("infos.newVotingTypes.title"),description:t("infos.newVotingTypes.description")})]}),n.jsxs(De,{children:[n.jsx(L,{label:t("newWithdraw.setupVoting.multisig.startLabel"),helpText:t("newWithdraw.setupVoting.multisig.startDescription")}),n.jsx(W,{name:"startSwitch",rules:{required:"Validate"},control:i,defaultValue:"now",render:({field:{onChange:D,value:N}})=>n.jsx(B,{items:y,value:N,onChange:R=>k(R,D)})}),x==="date"&&n.jsxs(n.Fragment,{children:[n.jsx(J,{mode:"start",defaultDateOffset:{minutes:10},minDurationMills:b,onUtcClicked:()=>A("first"),minDurationAlert:t("alert.tokenVoting.dateTimeMinDuration",{days:v,hours:u,minutes:g})}),n.jsx(X,{mode:"start"})]})]}),n.jsxs(De,{children:[n.jsx(L,{label:t("labels.endDate"),helpText:t("newWithdraw.setupVoting.tokenVoting.endDateDescription")}),n.jsx(W,{name:"durationSwitch",rules:{required:"Validate"},control:i,defaultValue:"duration",render:({field:{onChange:D,value:N}})=>n.jsx(B,{value:N,items:H,onChange:R=>O(R,D)})}),h==="duration"?n.jsx(Le,{defaultValues:{days:v,hours:u,minutes:g},minDuration:{days:v,hours:u,minutes:g},maxDurationDays:pe}):n.jsxs(n.Fragment,{children:[n.jsx(J,{mode:"end",onUtcClicked:()=>A("second"),minDurationMills:b,maxDurationMills:Ee,minDurationAlert:t("alert.tokenVoting.dateTimeMinDuration",{days:v,hours:u,minutes:g}),defaultDateOffset:{days:v,hours:u,minutes:g||0+10}}),n.jsx(X,{mode:"end"})]}),!d&&!c?.errors?.endDate&&n.jsx(Fe,{maxDuration:V()>=Ee,minDuration:w,limitOnMax:!0,alerts:m})]}),n.jsx($e,{onTimezoneSelect:M})]})},De=U.div.attrs({className:"space-y-3"})``,zt=({pluginSettings:e})=>{const{setError:t,clearErrors:a}=z();return f.useEffect(()=>{e?a("areSettingsLoading"):t("areSettingsLoading",{})},[a,e,t]),rt(e)?n.jsx(Wt,{pluginSettings:e}):nt(e)?n.jsx(Ot,{}):null};function Rt(e){return!(e.startDate||e.startTime||e.endDate||e.endTime||e.areSettingsLoading)}const ge=U.div.attrs({className:"space-y-3"})``;export{ge as F,$t as S,B as T,zt as a,Rt as i};
