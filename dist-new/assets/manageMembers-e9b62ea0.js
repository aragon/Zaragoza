import{u as P,e as S,j as M,k as W,bJ as C,aL as L,aM as A,ar as T,cs as V,q as e,L as N,aN as z,ct as F,R as k,b9 as y,aR as B}from"./main-1e616d6f.js";import{r as w}from"./tiptap-313d156f.js";import{F as R}from"./index-5413d03b.js";import{S as p,i as _,a as E}from"./index-9717678c.js";import{A as I}from"./index-4cbd21fe.js";import{R as H,U}from"./index-93139e2c.js";import{C as q,i as G,D as J}from"./createProposal-e1ca110a.js";import{R as Q}from"./index-b5e6cc73.js";import"./osx-ethers-780b73f3.js";import"./accordionSummary-a06aa21e.js";import"./index-b80a0dc5.js";import"./useTokenSupply-9a8f8b12.js";import"./query-keys-5b13e665.js";import"./useResolveDaoAvatar-b536da94.js";import"./button-023419f0.js";const me=()=>{const{t:s}=P(),{network:a}=S(),{data:i,isLoading:n}=M(),l=i?.plugins?.[0]?.instanceAddress,d=i?.plugins?.[0]?.id,{data:t,isLoading:m}=W(l,d),{data:h,isLoading:x}=C({pluginAddress:l,pluginType:d}),r=h,b=n||m||x,o=L({mode:"onChange",defaultValues:{links:[{name:"",url:""}],proposalTitle:"",startSwitch:"now",durationSwitch:"duration",actions:[]}}),{errors:u,dirtyFields:f}=A({control:o.control}),[c]=T({control:o.control,name:["actions"]}),[v,g]=w.useState(!1),D=w.useCallback(j=>{r&&(o.setValue("actions",V(c,r)),j())},[c,o,r]);return b?e.jsx(N,{}):!i||!r||!t?null:e.jsx(z,{...o,children:e.jsx(F,{daoId:i.address,children:e.jsx(q,{showTxModal:v,setShowTxModal:g,children:e.jsxs(R,{wizardProcessName:s("newProposal.title"),navLabel:s("labels.manageMember"),processType:"ProposalCreation",returnPath:k(B,{network:a,dao:y(i.ensDomain)||i.address}),children:[e.jsx(p,{wizardTitle:s("newProposal.manageWallets.title"),wizardDescription:s("newProposal.manageWallets.description"),isNextButtonDisabled:!$(u,c,r.minApprovals),onNextButtonClicked:D,onNextButtonDisabledClicked:()=>o.trigger("actions"),children:e.jsxs(e.Fragment,{children:[e.jsx(I,{actionIndex:0,useCustomHeader:!0,currentDaoMembers:t.members}),e.jsx(H,{actionIndex:1,useCustomHeader:!0,currentDaoMembers:t.members}),e.jsx(U,{actionIndex:2,useCustomHeader:!0,currentDaoMembers:t.members,currentMinimumApproval:r.minApprovals})]})}),e.jsx(p,{wizardTitle:s("newWithdraw.setupVoting.title"),wizardDescription:s("newWithdraw.setupVoting.description"),isNextButtonDisabled:!_(u),children:e.jsx(E,{pluginSettings:r})}),e.jsx(p,{wizardTitle:s("newWithdraw.defineProposal.heading"),wizardDescription:s("newWithdraw.defineProposal.description"),isNextButtonDisabled:!G(f,u),children:e.jsx(J,{})}),e.jsx(p,{wizardTitle:s("newWithdraw.reviewProposal.heading"),wizardDescription:s("newWithdraw.reviewProposal.description"),nextButtonLabel:s("labels.submitProposal"),onNextButtonClicked:()=>g(!0),fullWidth:!0,children:e.jsx(Q,{defineProposalStepNumber:3})})]})})})})};function $(s,a,i){if(s.actions||!a)return!1;let n=!1,l=0,d=!1;for(let t=0;t<a.length;t++){if(a[t].name==="add_address"){n=a[t].inputs?.memberWallets.some(m=>m.address==="");continue}if(a[t].name==="remove_address"){l+=a[t].inputs.memberWallets.length;continue}if(a[t].name==="modify_multisig_voting_settings"){const m=a[t].inputs.minApprovals;d=i!==m}}return!n||d||n&&l>0}export{me as ManageMembers};
